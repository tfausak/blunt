<!doctype html>

<html>
  <head>
    <title>Blunt</title>
  </head>

  <body>
    <h1>Blunt</h1>

    <dl>
      <dt>Input</dt>
      <dd>
        <pre><code autofocus class="haskell" contenteditable id="input">-- Edit me!
sum xs = foldr (+) 0 xs</code></pre>
      </dd>

      <dt>Output</dt>
      <dd>
        <pre><code class="haskell" id="output"></code></pre>
      </dd>
    </dl>

    <script>
      'use strict';

      (function () {
        var input = document.getElementById('input');
        var output = document.getElementById('output');

        input.oninput = function (_event) {
          var request = new XMLHttpRequest();

          request.onreadystatechange = function () {
            if (request.readyState === 4 && request.status === 200) {
              output.textContent = request.response;
            }
          };
          request.open('GET',
            '/pointfree?input=' + encodeURIComponent(input.textContent));
          request.send();
        };

        input.dispatchEvent(new Event('input'));
        input.focus();
      }());
    </script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>window.hljs.initHighlightingOnLoad();</script>
  </body>
</html>
