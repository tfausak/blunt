<!doctype html>

<html>
  <head>
    <title>Blunt</title>
  </head>

  <body>
    <h1>Blunt</h1>

    <dl>
      <dt>Input</dt>
      <dd>
        <pre><code autofocus contenteditable id="input">-- Edit me!
sum xs = foldr (+) 0 xs</code></pre>
      </dd>

      <dt>Output</dt>
      <dd>
        <pre><code id="output"></code></pre>
      </dd>
    </dl>

    <script>
      'use strict';

      (function () {
        var input = document.getElementById('input');
        var output = document.getElementById('output');

        input.oninput = function (_event) {
          var request = new XMLHttpRequest();

          request.onreadystatechange = function () {
            if (request.readyState === 4 && request.status === 200) {
              output.textContent = request.response;
            }
          };
          request.open('GET',
            '/pointfree?input=' + encodeURIComponent(input.textContent));
          request.send();
        };

        input.dispatchEvent(new Event('input'));
        input.focus();
      }());
    </script>
  </body>
</html>
