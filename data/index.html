<!doctype html>

<html>
  <head>
    <title>Blunt</title>
  </head>

  <body>
    <pre><code contenteditable id="input">sum xs = foldr (+) 0 xs</code></pre>
    <pre><code id="output"></code></pre>

    <script>
      'use strict';

      (function () {
        var input = document.getElementById('input');
        var output = document.getElementById('output');

        input.oninput = function (_event) {
          var request = new XMLHttpRequest();

          request.onreadystatechange = function () {
            if (request.readyState === 4 && request.status === 200) {
              output.textContent = request.response;
            }
          };
          request.open('GET',
            '/pointfree?input=' + encodeURIComponent(input.textContent));
          request.send();
        };

        input.dispatchEvent(new Event('input'));
      }());
    </script>
  </body>
</html>
